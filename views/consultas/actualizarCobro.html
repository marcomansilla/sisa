{{extend 'layout.html'}}

{{=cupon}}

<div>
  <h1>Saldo $ <input type="text" id="saldo"></input></h1>
</div>

<script type="text/javascript">
    $(document).ready(function(){
	$("#cobros_pagado").attr("readonly",true);
	$("#saldo").attr("readonly",true);
	$("#cobros_pago").attr("autocomplete","OFF");
	var pago=$("#cobros_pagado").val();

	if ($("#cobros_importe").val()>0){
	    $("#cobros_pago").focus();
	}
	else{
	    $("#cobros_importe").focus();
	}
	
	$("#saldo").val((parseFloat($("#cobros_importe").val())-parseFloat(pago)).toFixed(2));
	$("#cobros_pago").val(0);
	
	$("#cobros_pago").bind("keyup",function(){
	    var pagado=$("#cobros_pagado").val();
	    
	    if ($(this).val()>=0){
		$("#cobros_pagado").val((parseFloat($("#cobros_pago").val())+parseFloat(pago)).toFixed(2)).trigger("change");
	    }
	    else{
		$("#cobros_pagado").val(parseFloat($(this).val()));
	    }
	});

	$("#cobros_pagado").change(function(){
	    if (isNaN($(this).val())){
		$(this).val(pago);
	    }
	    else if ((parseFloat($("#cobros_importe").val())-parseFloat($("#cobros_pagado").val()))<0) {
		
	    }
	    else{
		$("#saldo").val((parseFloat($("#cobros_importe").val())-parseFloat($("#cobros_pagado").val())).toFixed(2));

	    }
	});
    });
</script>
